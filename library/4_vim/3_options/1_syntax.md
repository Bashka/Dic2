Подсветка синтаксиса
Включение и отключение подсветки
================================

Для включения подсветки синтаксиса используется команда `syntax on`.

Для выключения подсветки синтаксиса используется команда `syntax off`.

Информация о текущем состоянии подсветки (включена она или нет) хранится в переменной `g:syntax_on`.

Файлы подсветки
===============

Файлы подсветки синтаксиса располагаются в следующих каталогах:

* $VIMRUNTIME/syntax - глобальные файлы подсветки (для определения адреса VIMRUNTIME используется команда `:echo $VIMRUNTIME` редактора Vim);
* $HOME/.vim/syntax (для UNIX систем) и $HOME/vimfiles/syntax (для систем семейства Windows) - локальные файлы подсветки конкретного пользователя.

В перечисленных каталогах размещаются файлы, содержащие команды для определения подсветки синтаксиса на языке VimScript. Имена этих файлов должны соответствовать имени самого синтаксиса с расширением '.vim'. Так, файл подсветки синтаксиса для языка C++ имеет имя 'cpp.vim'.

Имя текущего файла подсветки синтаксиса (без расширения) хранится в переменной `&syntax` и устанавливается при определении типа файла (переменной `&filetype`) в то же значение. Эту переменную можно изменить, как и любую опцию Vim с помощью команды `set syntax=значение`.

Управление подсветкой
=====================

В файлах подсветки используется множество команд, определяющих стиль тех или иных компонентов данных. Стили же представляют собой именованные переменные, определяющие порядок форматирования. По умолчанию в Vim определены следующие стили:

|      Имя      |                           Стиль                     |
|---------------|-----------------------------------------------------|
|Comment        |Синий цвет букв                                      |
|Constant	      |Красный цвет букв                                    |
|String         |Красный цвет букв                                    | 
|Character      |Красный цвет букв                                    |
|Number         |Красный цвет букв                                    |
|Boolean        |Красный цвет букв                                    |
|Float          |Красный цвет букв                                    |
|Identifier     |Голубой цвет букв                                    |
|Function       |Голубой цвет букв                                    |
|Statement      |Золотой цвет букв                                    |
|Conditional    |Золотой цвет букв                                    |
|Repeat         |Золотой цвет букв                                    |
|Label          |Золотой цвет букв                                    |
|Operator       |Золотой цвет букв                                    |
|Keyword        |Золотой цвет букв                                    |
|Exception      |Золотой цвет букв                                    |
|PreProc        |Фиолетовый цвет букв                                 |
|Include        |Фиолетовый цвет букв                                 |
|Define         |Фиолетовый цвет букв                                 |
|Macro          |Фиолетовый цвет букв                                 |
|PreCondit      |Фиолетовый цвет букв                                 |
|Type           |Зеленый цвет букв                                    |
|StorageClass   |Зеленый цвет букв                                    |
|Structure      |Зеленый цвет букв                                    |
|Typedef        |Зеленый цвет букв                                    |
|Special        |Фиолетовый цвет букв                                 |
|SpecialChar    |Фиолетовый цвет букв                                 |
|Tag            |Фиолетовый цвет букв                                 |
|Delimiter      |Фиолетовый цвет букв                                 |
|SpecialComment |Фиолетовый цвет букв                                 |
|Debug          |Фиолетовый цвет букв                                 |
|Underlined     |Фиолетовый цвет букв с подчеркиванием                |
|Ignore         |Белый цвет букв                                      |
|Error          |Белый цвет букв на красном фоне с жирным начертанием |
|Todo           |Черный цвет букв на желтом фоне                      |

Так же возможно определить собственный стиль. Для этого используется команда `highlight стиль формат`. Здесь в качестве "стиля" указывается имя нового стиля, а "формат задается с помощью следующих опций:

* `ctermfg` - цвет шрифта;
* `ctermbg` - цвет фона;
* `cterm` - начертание.

В качестве цвета здесь может выступать любое из следующих значений:

|           Значение           |       Цвет     |
|------------------------------|----------------|
|Black                         |Черный          |
|DarkBlue                      |Темно-синий     |
|DarkGreen                     |Темно-зеленый   |
|DarkCyan                      |Темно-голубой   |
|DarkRed                       |Темно-красный   |
|DarkMagenta                   |Темно-пурпурный |
|Brown,DarkYellow              |Коричневый      |
|LightGray,LightGrey,Gray,Grey |Серый           |
|DarkGray,DarkGrey             |Темно-серый     |
|Blue,LightBlue                |Синий           |
|Green,LightGreen              |Зеленый         |
|Cyan,LightCyan                |Голубой         |
|Red,LightRed                  |Красный         |
|Magenta,LightMagenta          |Пурпурный       |
|Yellow,LightYellow            |Желтый          |
|White                         |Белый           |

В качестве стиля начертания может выступать любое из перечисленных значений:

| Значение |   Начертание  |
|----------|---------------|
|bold      |Жирное         |
|underline |Подчеркивание  |
|undercurl |Надчеркивание  |
|reverse   |Обратное       |
|inverse   |Инверсия цвета |
|italic    |Наклон         |

Ниже приведен пример создания собственного стиля, аналогичного стилю 'Error':

    highlight myStyle term=Bold ctermfg=Black ctermbg=Red

Так же можно создать собственный стиль на основании имеющегося. Для этого используется команда:

    highlight link стиль родитель

Здесь в качестве "стиля" указывается имя нового стиля, а в качестве "родителя" имя того стиля, который является для него основой.

Подсветка ключевых слов
-----------------------

Для указания ключевых слов, которые должны подсвечиваться, используется следующая команда:

    syn keyword стиль слова

Здесь в качестве "стиля" указывается применяемый к перечисленным через запятую "словам" стиль подсветки.

Ниже приведен пример подсветки по ключевым словам:

    syn keyword cppAccess public protected private

Подсветка по регулярному выражению
----------------------------------

Для подсветки данных, структура которых может быть определена с помощью регулярных выражений, используется следующая команда:

    syn match стиль /выражение/

Здесь в качестве "стиля" указывается применяемый к данным, соответствующим "регулярному выражению" стиль подсветки.

Ниже приведен пример подсветки дробных чисел по регулярному выражению:

    syn match Float /\d\+\(\.\d\)\=/

Подсветка региона
-----------------

Для подсветки данных, ограниченных некоторыми группами символов, используется следующая команда:

    syn region стиль start=/выражениеНачала/ end=/выражениеКонца/ skip=/выражениеПропуска/

Здесь в качестве "стиля" указывается применяемый к региону стиль. Опции "start" и "end" определяют с помощью регулярных выражений символы начала и конца региона. Опция "skip" с помощью регулярного выражения определяет символы, которые не должны проверяться с помощью "end" выражения (исключение символов).

Ниже приведен пример подсветки данных типа 'строки':

    syn region String start=/"/ end=/"/ skip=/\\"/

Здесь, для исключения экранированных кавычек, которые могут присутствовать в строках, используется опция skip.

Так же можно указать последней опцией ключ fold, и если установлена опция `set foldmethod=syntax`, то есть сворачивание определяется синтаксисом, то указанный регион можно будет сворачивать.

Подсветка вложений
------------------

Если необходимо, чтобы некоторые данные подсвечивались только в том случае, если они вложены в регион, используются следующие ключи:

* `contained` - определение данных, которые должны быть подсвечены только будучи вложенными;
* `contains=стили` - определение региона, который может содержать заданные вложенные "стили".

Ниже приведен пример подсветки ключевых слов TODO и NODE, которое должно быть вложено в комментарий:

    highlight link CommentKeyword1 Keyword
    highlight link CommentKeyword2 Keyword
    syn keyword CommentKeyword1 TODO contained
    syn keyword CommentKeyword2 NODE contained
    syn region Comment  start=/\/\*/ end=/\*\// contains=CommentKeyword1,CommentKeyword2
