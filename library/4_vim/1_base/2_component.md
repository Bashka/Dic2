Компоненты текста, перемещение по ним и редактирование
Компоненты текста
=================

В Vim редактируемый текст делится на следующие компоненты (elm):

1. Символы (char) - элементарные части текста;
1. Слова (word) - группы символов, разделенные пробельным символом или символом препинания;
1. Строки (line) - группы символов от начала строки до символа переноса строки включительно;
1. Компоненты языка (block) - группы символов, определенные семантикой текста;
1. Страницы (page) - группы строк.

Для управления компонентами текста используются различные команды перемещения, редактирования и выделения. Как правило большинству компонентов соответствуют специальные клавиши, так, символы представляются клавишами `h` и `l`, слова клавишами `w` и `b`, а строки клавишами `j` и `k`. Другие команды дополняются данные и указывают необходимую операцию над ними, как на пример операция удаления слова `dw` или операция замены предыдущего слова `cb`. Так же можно указывать количество повторов каждой операции предварив команду цифрой, обозначающей число затрагиваемых компонентов, как на пример команда для удаления текущей строки и четырех строк под ней (всего 5 строк) `5dj` и так далее.

В Vim различают четыре режима работы:

1. Перемещения - режим, в котором используются команды смещения курсора в тексте или перехода в другие режимы:
1. Редактирования - режим, в котором все клавиши используются для ввода текста. Для выхода из этого режима в режим перемещения, используется клавиша Esc или C-c;
1. Выделения - режим, в котором перемещение курса приводит к выделению текста с целью манипуляции над ним в дальнейшем. Для перехода из этого режима в другие, используются специальные команды;
1. Командный - режим, в котором Vim позволяет пользователю выполнять специальные команды в своей консоли.

Перемещение
===========

Посимвольное
------------

Для посимвольного перемещения используются команды:

* `h` - на один символ влево;
* `l` - на один символ вправо;
* `t<char>` - вперед до указанного символа;
* `f<char>` - вперед на указанный символ;
* `T<char>` - назад до указанного символа;
* `F<char>` - назад на указанный символ;
* `;` - повтор перехода вперед (последней команды t или f);
* `,` - повтор перехода назад (последней команды T или F).

Пословное
---------

Для пословного перемещения используются команды:

* `e` - в конец текущего слова;
* `b` - в начало текущего слова;
* `w` - в начало следующего слова;
* `*` - на следующее слово, аналогичное слову под курсором.

Построчное
----------

Для построчного перемещения используются команды:

* `j` - на одну строку вниз;
* `k` - на одну строку вверх;
* `^` - в начало текущей строки;
* `$` - в конец текущей строки;
* `<число>gg` - на заданную "числом" строку.

По компонентам языка
--------------------

Для перемещения по компонентам языка используются команды:

* `%` - к парной скобке;
* `{` - на следующую пустую строку;
* `}` - на предыдущую пустую строку.

Постраничное
------------

Для постраничного перемещения используются команды:

* `H` - в начало страницы;
* `M` - в середину страницы;
* `L` - в конец страницы;
* `C-U` - на полстраницы вверху;
* `C-D` - на полстраницы вниз;
* `gg` - в начало документа;
* `G` - в конец документа.

Поиск
-----

Для поиска подстроки в тексте и перевода на него курсор используются команды:

* `/<подстрока>` - поиск всех вхождений подстроки в тексте и перевод курсора на первое вхождение от текущей позиции;
* `n` - переход к следующему вхождению последнего поиска;
* `N` - переход к предыдущему вхождению последнего поиска.

Редактирование
==============

Добавление
----------

Для добавления текста используются команды (переход в режим редактирования):

* `i` - начать вставку перед текущим символом;
* `a` - начать вставку за текущим символом;
* `I` - начать вставку с начала строки;
* `A` - начать вставку в конце текущей строки;
* `o` - новая строка под текущей и вставка;
* `O` - новая строка перед текущей и вставка;
* `J` - склеить текущую и следующую строку пробелом (замена переноса строки на пробел);
* `gi` - продолжить ввод с последней позиции редактирования;
* `C-p` - автозавершение текущего слова на основании записанных ранее слов.

Замена
------

Для замены текста используются команды (переход в режим редактирования):

* `r<char>` - замена текущего символа на данный с возвратом в режим перемещения;
* `s` - удаление текущего символа и переход в режим редактирования;
* `R` - режим замены (Insert);
* `S` - удаление текущей строки и вставка;
* `c<elm>` - удаление компонента и вставка;
* `C` - удаление от текущего символа до конца строки и вставка.

Поиск с заменой в тексте выполняется с помощью команды режима командной строки (см. ниже). Ниже приведено несколько примеров:

* `:s/<a>/<b>/` - замена первого вхождения "a" на "b" в текущей строке;
* `:s/<a>/<b>/g` - замена всех вхождений "a" на "b" в текущей строке;
* `:%s/<a>/<b>/` - замена первого вхождения "a" на "b" в тексте;
* `:%s/<a>/<b>/g` - замена всех вхождений "a" на "b" в тексте.

Копирование
-----------

Для копирования текста в буфер обмена Vim используются команды:

* `y<elm>` - копировать компонент в буфер;
* `yy` - копировать текущую строку в буфер.

Вырезание
---------

Для вырезания текста в буфер обмена Vim используются команды:

* `x` - вырезать текущий символ;
* `d<elm>` - вырезать компонент;
* `D` - вырезать от текущего символа до конца строки;
* `dd` - вырезать текущую строку;
* `di<char>` - вырезать все между указанным символом;
* `da<char>` - вырезать все между указанным символом и сам символ.

Вставка
-------

Для вставки текста из буфера Vim используются команды:

* `p` - вставка текста из буфера после текущей строки;
* `P` - вставка текста из буфера перед текущей строкой.

Отмена изменений
----------------

Для использования журнала изменений используются команды:

* `u` - отмена последней команды;
* `C-r` - отмена последней отмены;
* `.` - повтор последней команды.

Выделение
=========

Переход в режим выделения
-------------------------

Для перехода в режим выделения используются команды:

* `v` - посимвольный режим выделения от текущего символа;
* `V` - построчный режим выделения от текущей строки;
* `C-v` - блочное выделение от текущего символа.

Команды в режиме выделения
--------------------------

В режиме выделения действуют все команды перемещения, замены, команды для вырезания текста в буфер обмена и следующие:

* `o`  - перемещает курсор к началу области выделения, что позволяет увеличить область выделения в обратном направлении;
* `r<char>` - замена всех выделенных символов на данный;
* `I<строка>Esc` - переход в режим вставки. После выхода из него с помощью Esc, введенная строка будет повторена перед каждой выделенной строкой;
* `<<` - смещение выделенных строк на один отступ назад;
* `>>` - смещение выделенных строк на один отступ вперед;
* `=` - выравнивание выделенных строк.

Командный режим
===============

Для перехода в командный режим используется клавиша `:`, после которой вводится команда и следует нажать Enter для ее выполнения.

В командном режиме могут применяться как функции и операторы Vim, так и утилиты, установленные в ОС. Если необходимо использовать стандартные функции и операторы Vim, их имена вводятся после команды `:` и они выполняются. Для использования внешних утилит, используется команда `!` за которой следует имя внешней утилиты и список передаваемых ей параметров.

Ниже приведен пример использования режима командной строки Vim для выполнения стандартной функции Vim и внешней утилиты:

    :echo line('.')
    :!cat file.txt

Часто функции и операторы в Vim имеют сокращения, так, команда `write` (сохранить изменения) имеет сокращение `w`.

Командный режим в Vim может использовать следующие модификаторы:

* `:'<,'><команда>` - выполнение команды для выделенного текста;
* `:%<команда>` - применение команды ко всему тексту (по умолчанию только к текущей строке);
* `:.!<команда>` - выполнение внешней команды и вставка результата.

Описание стандартных функций и операторов Vim приводится в других разделах справочника и документации Vim, доступной по команде `:h` (для выхода из документации, используйте команду `:q`).
