Объектно-ориентированное программирование
Методы объектов
===============

VimScript позволяет использовать объектно-ориентированную парадигму программирования путем определения и копирования прототипов вместо определения классов. Так, любой словарь представляет готовый объект, элементы которого можно считать ключами. Словарь так же может иметь связанные с ним функции, которые можно считать методами. Такие функции объявляются следующим образом:

    function <словарь>.<имяМетода>(<аргументы>) dict
        <тело>
    endfunction

Методы вызываются аналогично обычным функциям, но с приставкой объекта:

    call myObj.method()

В теле метода можно получить доступ к свойствам объекта с помощью переменной `self`, которая ссылается на сам словарь. Ниже приведен пример доступа к элементу словаря через его метод:

    let obj = {'prop': 1}
    function obj.getProp() dict
        return self.prop " Получение значения свойства 'prop'
    endfunction

Прототипная реализация классов
==============================

Так как в VimScript нет возможности определить класс (структуру объекта), для создания объектов можно использовать прототипы, то есть копировать другие объекты. Ниже приведен пример объявления прототипа и использования его для создания других объектов:

    let prot = {'prop': 1}
    function prot.getProp() dict
        return self.prop
    endfunction
    let objA = deepcopy(prot)
    let objB = deepcopy(prot)
    let objA.prop = 2
    echo objA.getProp() " Вернет 2
    echo objB.getProp() " Вернет 1, то есть то, что было в прототипе

Функция `deepcopy` копирует значения элементов прототипа в новый объект, а так же копирует ссылки на методы прототипа, что позволяет экономить память и не дублировать методы для каждого объекта.
