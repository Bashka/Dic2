Сложный тип
Создание сложного типа
======================

Сложный тип представляет теги, которые могут содержать вложенные теги и атрибуты.

Сложный тип делится на два подкласса:

1. Сложный тип с простым содержимым - теги такого типа могут иметь атрибуты, но не могут содержать вложенные теги, а только данные простого типа;
1. Сложный тип со сложным содержимым - теги такого типа могут иметь как атрибуты, так и вложенные теги.

Список атрибутов задается с помощью тега:

    <attribute name="имя" type="тип" use="использование"/>

Таких тегов может быть задано множество. В качестве "типа" задается любой доступный простой тип. В качестве формы "использования" доступно одно из следующих значений: required - должен присутствовать обязательно; optional - может быть опущен; prohibited - запрещен.

С простым содержимым
--------------------

Сложный тип с простым содержимым создается с помощью тега:

    <complexType name="имяСложногоТипа">
      <simpleContent>
        <restriction base="типВложения">
          <фильтры>
          <списокАтрибутов>
        </restriction>
      </simpleContent>
    </complexType>

Здесь в качестве "типа вложения" указывается простой тип, которому должны соответствовать текстовые данные тега. Помимо фильтров, применяющихся к этому типу, могут быть так же заданы дополнительные фильтры данных.

Ниже приведен пример сложного типа с простым содержимым и атрибутом:

    <complexType name="length">
      <simpleContent>
        <extension base="nonNegativeInteger">
          <attribute name="unit" type="NMTOKEN"/>
        </extension>
      </simpleContent>
    </complexType>

Со сложным содержимым
---------------------

Сложный тип со сложным содержимым создается с помощью тега:

    <complexType name="имяСложногоТипа">
      <композитор>
      <списокАтрибутов>
    </complexType>

Композиторы определяют порядок следования вложенных тегов и могут быть вложены друг в друга для определения сложных последовательностей. В качестве композитора может выступать любой из перечисленных ниже тегов:

`all` - произвольный порядок. Вспе перечисленные в данном композиторе элементы должны присутствовать, но в произвольном порядке:

    В XSD:
    <element name="note">
      <complexType>
        <all>
          <element name="to" type="string"/>
          <element name="from" type="string"/>
        </all>
      </complexType>
    </element>
    
    В XML:
    <note><from/><to/></note> или <note><to/><from/></note>

`sequence` - заданная последовательность. Все перечисленные в данном композиторе элементы должны присутствовать при чем в заданном порядке;

    В XSD:
    <element name="note">
      <complexType>
        <sequence>
          <element name="to" type="string"/>
          <element name="from" type="string"/>
        </sequence>
      </complexType>
    </element>
    
    В XML:
    <note><to/><from/></note>

`choise` - один из указанных элементов. Может быть указан только один из перечисленных в данном композиторе элемент;

    В XSD:
    <element name="note">
      <complexType>
        <choise>
          <element name="to" type="string"/>
          <element name="from" type="string"/>
        </choise>
      </complexType>
    </element>
    
    В XML:
    <note><to/></note> или <note><from/></note>

Любой композитор может включать в себя в качестве определения вложенного элемента следующий тег:

    <element name="имяЭлемента" type="типЭлемента"/>

Если такой элемент уже существует и описан ранее, можно воспользоваться другой записью:

    <element ref="имяЭлемента"/>

Для определения числа возможных повторений элемента в композиторе, используются следующие атрибуты тега 'element':

* minOccurs - минимальное возможное число повторений тега в композите;
* maxOccurs - максимальное возможное число повторений тега в композите (для указания бесконечности используется значение 'unbounded').

Со сложным содержимым через наследование
----------------------------------------

Если необходимо унаследовать структуру сложного типа со сложным содержимым, можно воспользоваться записью:

    <complexType name="имяСложногоТипа">
      <complexContent>
        <extension base="имяБазовогоТипа">
          <композитор>
          <списокАтрибутов>
        </extension>
      </complexContent>
    </complexType>

Данный тип будет включать все композиторы и атрибуты базового типа, а так же все перечисленные в нем композиторы и атрибуты.

Примеры
=======
